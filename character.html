<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title">Scheda Personaggio - Chronicles of Darkness</title>
    <!-- CSS Base (Layout) -->
    <link rel="stylesheet" href="css/base.css">
    <!-- CSS Tema (Colori e Stile) -->
    <link rel="stylesheet" href="css/themes/anni50.css">
    <!-- Aggiungiamo Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .pregio-buttons {
            display: block;
            margin: 0 auto;
            width: 40px;
            transform: scale(0.7);
            border-radius: 5px;
            overflow: hidden;
        }
    </style>
</head>
<body>

    <div class="nav-top" style="padding: 10px;">
        <a href="index.html" class="btn" data-i18n="btn_back_home">← Torna all'Archivio</a>
    </div>

    <header>
        <h1 data-i18n="page_title"></h1>
    </header>

    <main>
        <section id="info-personaggio">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_info"></h2>
            </div>
            <div class="gruppi-tratti-container">
                <!-- Colonna Sinistra: Dati -->
                <div class="colonna-tratti col-wide">
                    <div class="riga-tratto-principale">
                        <label for="nome" data-i18n="label_name"></label>
                        <input type="text" id="nome" name="nome">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="cronaca" data-i18n="label_chronicle"></label>
                        <input type="text" id="cronaca" name="cronaca">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="concetto" data-i18n="label_concept"></label>
                        <input type="text" id="concetto" name="concetto">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="giocatore" data-i18n="label_player"></label>
                        <input type="text" id="giocatore" name="giocatore">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="eta" data-i18n="label_age"></label>
                        <input type="text" id="eta" name="eta">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="fazione" data-i18n="label_faction"></label>
                        <input type="text" id="fazione" name="fazione">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="virtu" data-i18n="label_virtue"></label>
                        <input type="text" id="virtu" name="virtu">
                    </div>
                    <div class="riga-tratto-principale">
                        <label for="vizio" data-i18n="label_vice"></label>
                        <input type="text" id="vizio" name="vizio">
                    </div>
                </div>
                <!-- Colonna Centrale: Vuota (Spaziatore) -->
                <div class="colonna-tratti">
                    <!-- Spazio vuoto per separare dati e immagine -->
                </div>
                <!-- Colonna Destra: Immagine -->
                <div class="colonna-tratti">
                    <div id="character-image-container" class="character-image-box">
                        <img id="character-image-preview" src="#" alt="Anteprima Personaggio">
                        <div class="image-placeholder">
                            <span>+</span>
                            <p data-i18n="ui_add_image"></p>
                        </div>
                        <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    </div>
                </div>
            </div>
        </section>
        
        <section id="attributi">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_attributes"></h2>
            </div>
            <div class="gruppi-tratti-container">
                <div class="colonna-tratti">
                    <div class="riga-tratto">
                        <label data-i18n="attr_intelligence"></label> <div class="punti" data-tratto="intelligenza"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_wits"></label> <div class="punti" data-tratto="prontezza"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_resolve"></label> <div class="punti" data-tratto="fermezza"></div>
                    </div>
                </div>
                <div class="colonna-tratti">
                    <div class="riga-tratto">
                        <label data-i18n="attr_strength"></label> <div class="punti" data-tratto="forza"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_dexterity"></label> <div class="punti" data-tratto="destrezza"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_stamina"></label> <div class="punti" data-tratto="costituzione"></div>
                    </div>
                </div>
                <div class="colonna-tratti">
                    <div class="riga-tratto">
                        <label data-i18n="attr_presence"></label> <div class="punti" data-tratto="presenza"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_manipulation"></label> <div class="punti" data-tratto="persuasione"></div>
                    </div>
                    <div class="riga-tratto">
                        <label data-i18n="attr_composure"></label> <div class="punti" data-tratto="autocontrollo"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="abilita">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_skills"></h2>
            </div>
            <div class="gruppi-tratti-container">
                <div class="colonna-tratti">
                    <h3 data-i18n="cat_mental"></h3>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_academics"></label><div class="punti" data-tratto="accademiche"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_computer"></label><div class="punti" data-tratto="computer"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_crafts"></label><div class="punti" data-tratto="artigianato"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_investigation"></label><div class="punti" data-tratto="indagare"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_medicine"></label><div class="punti" data-tratto="medicina"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_occult"></label><div class="punti" data-tratto="occulto"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_politics"></label><div class="punti" data-tratto="politica"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_science"></label><div class="punti" data-tratto="scienza"></div></div>
                </div>
                <div class="colonna-tratti">
                    <h3 data-i18n="cat_physical"></h3>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_athletics"></label><div class="punti" data-tratto="atletica"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_brawl"></label><div class="punti" data-tratto="rissa"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_drive"></label><div class="punti" data-tratto="guidare"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_firearms"></label><div class="punti" data-tratto="armi_da_fuoco"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_larceny"></label><div class="punti" data-tratto="ladro"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_stealth"></label><div class="punti" data-tratto="furtivita"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_survival"></label><div class="punti" data-tratto="sopravvivenza"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_weaponry"></label><div class="punti" data-tratto="armi_da_mischia"></div></div>
                </div>
                <div class="colonna-tratti">
                    <h3 data-i18n="cat_social"></h3>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_animal_ken"></label><div class="punti" data-tratto="animale"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_empathy"></label><div class="punti" data-tratto="empatia"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_expression"></label><div class="punti" data-tratto="espressivita"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_intimidation"></label><div class="punti" data-tratto="intimidire"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_persuasion"></label><div class="punti" data-tratto="persuasione"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_socialize"></label><div class="punti" data-tratto="socialita"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_streetwise"></label><div class="punti" data-tratto="conoscenza_strada"></div></div>
                    <div class="riga-tratto"><span class="specializzazione"></span><label data-i18n="skill_subterfuge"></label><div class="punti" data-tratto="sotterfugio"></div></div>
                </div>
            </div>
        </section>

        <section id="specializzazioni-attive">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_specializations"></h2>
            </div>
            <div class="colonna-tratti">
                <!-- Le righe delle specializzazioni verranno inserite qui dinamicamente da JavaScript -->
                <div id="contenitore-specializzazioni"></div>
            </div>
        </section>

        <section id="pregi">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_merits"></h2>
            </div>
            <div class="gruppi-tratti-container">
                <div class="colonna-tratti">
                    <div class="contenitore-pregi" id="pregi-col-1"></div>
                    <div class="pregio-buttons">
                        <button class="aggiungi-pregio-btn" data-colonna="pregi-col-1">+</button>
                        <button class="rimuovi-pregio-btn" data-colonna="pregi-col-1">-</button>
                    </div>
                </div>
                <div class="colonna-tratti">
                    <div class="contenitore-pregi" id="pregi-col-2"></div>
                    <div class="pregio-buttons">
                        <button class="aggiungi-pregio-btn" data-colonna="pregi-col-2">+</button>
                        <button class="rimuovi-pregio-btn" data-colonna="pregi-col-2">-</button>
                    </div>
                </div>
                <div class="colonna-tratti">
                    <div class="contenitore-pregi" id="pregi-col-3"></div>
                    <div class="pregio-buttons">
                        <button class="aggiungi-pregio-btn" data-colonna="pregi-col-3">+</button>
                        <button class="rimuovi-pregio-btn" data-colonna="pregi-col-3">-</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="tratti-principali">
            <div class="section-header">
                <i class="lock-icon fas fa-eye" title="Blocca/Sblocca Sezione" data-i18n-title="title_lock"></i>
                <h2 data-i18n="sect_main_traits"></h2>
            </div>
            <div class="riga-tratto-principale riga-tratto-spaziato">
                <label for="integrita" data-i18n="label_integrity"></label>
                <div class="punti" data-tratto="integrita" data-max="15"></div>
            </div>
            <div class="riga-tratto-principale riga-doppia-scala">
                <label data-i18n="label_health"></label>
                <div class="contenitore-doppia-scala" id="scala-salute" data-tratto="salute" data-max="15"></div>
            </div>
            <div class="riga-tratto-principale riga-doppia-scala">
                <label data-i18n="label_sanity"></label>
                <div class="contenitore-doppia-scala" id="scala-sanita" data-tratto="sanita" data-max="15"></div>
            </div>
            <div class="riga-tratto-principale riga-doppia-scala">
                <label data-i18n="label_willpower"></label>
                <div class="contenitore-doppia-scala" id="scala-volonta" data-tratto="volonta" data-max="15"></div>
            </div>
            <div class="riga-tratto-principale riga-tratto-semplice">
                <label for="taglia" data-i18n="label_size"></label>
                <input type="number" id="taglia" value="5" class="valore-calcolato">
            </div>
            <div class="riga-tratto-principale">
                <label for="valore-iniziativa" data-i18n="label_init_mod"></label>
                <span id="valore-iniziativa" class="valore-calcolato">0</span>
            </div>
            <div class="riga-tratto-principale">
                <label for="valore-difesa" data-i18n="label_defense"></label>
                <span id="valore-difesa" class="valore-calcolato">0</span>
            </div>
            <div class="riga-tratto-principale">
                <label for="valore-velocita" data-i18n="label_speed"></label>
                <span id="valore-velocita" class="valore-calcolato">0</span>
            </div>
            <div class="riga-tratto-principale">
                <label for="armatura" data-i18n="label_armor"></label>
                <input type="text" id="armatura" value="0" class="valore-calcolato">
            </div>
            <div class="riga-tratto-principale riga-tratto-spaziato">
                <label for="esperienza-totale" data-i18n="label_exp_total"></label>
                <input type="number" id="esperienza-totale" value="0" class="valore-calcolato">
            </div>
            <div class="riga-tratto-principale">
                <label for="esperienza-spesa" data-i18n="label_exp_spent"></label>
                <input type="number" id="esperienza-spesa" value="0" class="valore-calcolato">
            </div>
            <div class="riga-tratto-principale">
                <label for="esperienza-rimanente" data-i18n="label_exp_remaining"></label>
                <span id="esperienza-rimanente" class="valore-calcolato">0</span>
            </div>
        </section>
    </main>

    <footer>
        <button id="salva-btn" data-i18n="btn_save"></button>
        <button id="carica-btn" data-i18n="btn_load"></button>
    </footer>

    <!-- Carichiamo gli SDK di Firebase (necessari prima di script.js) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Configurazione Firebase -->
    <script src="js/firebase-config.js"></script>

    <!-- Carichiamo un unico script che gestirà tutto -->
    <script src="js/script.js"></script>

</body>
</html>